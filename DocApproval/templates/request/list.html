{% extends "base_layout.html" %}
{% load static from staticfiles %}
{% load i18n %}

{% block scripts %}
    <script type="text/javascript" src="{% static "js/jquery.cookie.js" %}"></script>
    <script type='text/javascript' src="{% static "js/datatables/jquery.dataTables.min.js" %}"></script>
    <script type='text/javascript' src="{% static "js/datatables/dt_bootstrap.js" %}"></script>
{% endblock scripts %}

{% block styles %}
    <link rel='stylesheet' type="text/css" href="{% static "js/datatables/jquery.dataTables.css" %}"/>
    <link rel='stylesheet' type="text/css" href="{% static "js/datatables/dt_bootstrap.css" %}"/>
{% endblock styles %}

{% block maincontent %}
    <table id="grid">
        <thead>
        <tr>
            <th>Наименование</th>
            <th>Город</th>
            <th>Статус</th>
            <th>Инициатор</th>
            <th>Отправить на подпись</th>
            <th>Создана</th>
            <th>Утверждена</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
{% endblock %}

{% block scripts_for_execution %}
    <script type="text/javascript" language="JavaScript">
        $(function () {
            $.ajaxSetup({
                beforeSend: function (xhr, settings) {
                    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
                }
            });

            $('#grid').dataTable({
                bProcessing: true,
                bServerSide: true,
                sServerMethod: 'POST',
                sAjaxSource: "{% url ajax_backend_url %}"
            });
        });
    </script>
{% endblock scripts_for_execution %}